<!DOCTYPE html>

<html>
<meta charset="utf-8">

<body bgcolor=rgb(23,33,43);>
    <style type="text/css">
        BODY {
            margin-bottom: 50px;
        }

        table {
            width: 45%;
            /* Ширина таблицы */
            height: 250px;
            /* Высота таблицы */
            border-collapse: collapse;
            background: rgb(23, 33, 43);
            /* Цвет фона таблицы */
            color: rgb(78, 128, 174);
            /* Цвет текста */
            /* Отображать двойные линии как одинарные */
        }

        input {
            background: #fff;
            color: darkslategrey
        }

        div {
            background: rgb(47, 110, 165);
        }

        b {
            font-size: 14pt;
            position: absolute;
            color: rgb(78, 128, 174);
        }

        th {
            background: #252526;
            /* Цвет фона */
            text-align: center;
        }

        td {
            text-align: center;
            /* Выравнивание по центру */
        }

        td,
        th {
            border: 1px solid rgb(78, 128, 174);
            /* Параметры границы */
            padding: 4px;
            /* Поля в ячейках */
        }

        #footer {
            position: fixed;
            /* Фиксированное положение */
            left: 0;
            bottom: 0;
            /* Левый нижний угол */
            padding: 10px;
            /* Поля вокруг текста */
            background: rgb(23, 33, 43);
            /* Цвет фона */
            color: rgb(78, 128, 174);
            /* Цвет текста */
            width: 100%;
            /* Ширина слоя */
        }
    </style>

    <form id="form1">

        <input id="" ; type="button" ; value="Registry" ;
            style="font-size: large; position: absolute; top:350px; left:520px; width: 150px; height: 50px; background: rgb(23,33,43); color:rgb(78,128,174)"
            ;>


    </form>


    <div id="footer">&copy; HN Haitanov Nikita </div>



    <script type="text/javascript">

        class Home {

            personsStr = "";

            constructor(view) {
                this.initChatUpdates();
                this.personsStr = this.updateChat();
                view.innerHTML =  this.createTable(this.personsStr);
                view.innerHTML += this.windowForPersonTransactions('Update');

            }

            updateChat() {

                var xhr = new XMLHttpRequest();

                xhr.open('GET', 'http://192.168.1.100:1080/api/get-client/', false);
                xhr.send();

                if (xhr.status != 200) {
                    alert(xhr.status + ': ' + xhr.statusText);
                } else {
                    this.personsStr = xhr.responseText;
                    return this.personsStr;
                }
            }

            initChatUpdates() {
                setInterval(() => { this.updateChat(); }, 10000);
            }

            createTable(personsStr) {

                let arrayPersons = this.personsStr.split("\n");

                let column = arrayPersons.length - 1;
                let row = 4;
                let person = "";

                var resultTable = '<table align="center";  bordercolor:rgb(23,33,43); bgcolor:rgb(78,128,174);>';
                resultTable += '<colgroup span="4"; style="background-color:#fff"></colgroup>'
                    + '<tr>'
                    + '<th >ID</th>'
                    + '<th>Name</th>'
                    + '<th>LastName</th>'
                    + '<th>age</th>'
                    + '</tr>';

                for (var i = 0; i < parseInt(column); i++) {
                    resultTable += '<tr>';
                    person = arrayPersons[i].split(" ");

                    for (var j = 0; j < parseInt(row); j++) {
                        resultTable +=
                            '<td>'
                            + person[j]
                            + '<\/td>';
                    }
                    resultTable += '<\/tr>';
                }
                resultTable += '<\/table';
                return resultTable;
            }

            windowForPersonTransactions(operation) {
                let windowForPersonTransactions =
                    `<div id="FillingPersonForm"
                        style="position: absolute;top:90px; left:15px; width:350px; height:450px; background:rgb(23,33,43);">
                        <b style="  top:1%; left:37%; text-decoration: underline">`+ operation + ` person</b>
                        <b style="  top:10%; left:10%;">Fill in the person's data for which you need to perform the operation.</b>
                        <b style="  top:24%; left:5%;">ID</b>
                        <div style="position: relative; left:12%; width:290px; height: 40px; top:22%; ">
                            <input id="ID" type="text" value=""
                                style="position: absolute; top:5px; left:5px; width: 275px; height: 25px;">
                        </div>
                        <b style="top:41%; left:5%;">Name</b>
                        <div style="position: relative; left:20%; width:265px; height: 40px; top:30%;">
                            <input id="fname" type="text" value=""
                                style="position: absolute; top:5px; left:5px; width: 250px; height: 25px;">
                        </div>
                        <b style="top:57%; left:5%;">Last name</b>
                        <div style="position: relative; left:30%; width:230px; height: 40px; top:37%; ">
                            <input id="lname" type="text" value=""
                                style="position: absolute; top:5px; left:5px; width: 215px; height: 25px;">
                        </div>
                        <b style="top:73%; left:5%;">Age</b>
                        <div style="position: relative; left:20%; width:265px; height: 40px; top:44%;">
                            <input id="age" type="text" value=""
                                style="position: absolute; top:5px; left:5px; width: 250px; height: 25px;">
                        </div>

                        <input id="save" ; type="button" ; value="OK" ;
                            style="font-size: large; position: absolute; top:90%; left:5%; width: 100px; height: 20px;font-size: 10pt; background: rgb(23,33,43); color:rgb(78,128,174)"
                            ;>

                        <input id="clear" ; type="button" ; value="Clear" ;
                            style="font-size: large; position: absolute; top:90%; left:35%; width: 100px; height: 20px;font-size: 10pt; background: rgb(23,33,43); color:rgb(78,128,174)"
                            ;>

                        <input id="cancel" ; type="button" ; value="Cancel" ;
                            style="font-size: large; position: absolute; top:90%; left:65%; width: 100px; height: 20px;font-size: 10pt; background: rgb(23,33,43); color:rgb(78,128,174)"
                            ;>
                    </div>`
                return windowForPersonTransactions;
            }

        }

        new Home(document.getElementById("form1"));


    </script>

</body>

</html>